{
 "absolute_value": 0,
 "align_labels_right": 0,
 "creation": "2022-04-12 17:41:15.501631",
 "css": ".master{\n    width:100%;\n    border:1px solid black;\n    font-family:arial;\n    font-size:13px;\n}\n\n.master table{\n    font-family:arial;\n    font-size:12px;\n    color:black;\n    width:100%;\n}\n\n.right1 tr{\n    border-bottom:1px solid black;\n}\n\n.leftline{\n    border-left:1px solid black;\n}\n\n.left1{\n    float:left;\n    width:50%;\n}\n\n.right1{\n    float:right;\n    width:50%;\n}\ntable .hsn{\n    width:100;\n}\n.hsn tr{\n    border-top:1px solid black;\n}\n.print-format td{\n    padding: 2px!important; border-spacing: 0!important;  margin:0!important; height:0!important;padding-left: 4px!important;padding-right: 3px!important;\n}",
 "custom_format": 1,
 "default_print_language": "en-US",
 "disabled": 0,
 "doc_type": "Sales Invoice",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "<h6 style=\"text-align:center;font-size:18px;\"><b>Tax Invoice</b></h6>\n<p style=\"text-align:center;\">{% if doc.gst_category==\"SEZ\" %} SUPPLY MEANT FOR EXPORT/SUPPLY TO SEZ UNIT OR SEZ DEVELOPER FOR AUTHORISED OPERATIONSUNDER BOND OR LETTER OF UNDERTAKING WITHOUT PAYMENT OF IGST {% endif %}</p>\n<p style=\"text-align:center;\">{% if doc.tax_category==\"DEEMED EXPORTS\" %} SUPPLY MEANT FOR EXPORT/SUPPLY TO SEZ UNIT OR SEZ DEVELOPER FOR AUTHORISED OPERATIONSUNDER BOND OR LETTER OF UNDERTAKING WITHOUT PAYMENT OF IGST {% endif %}</p>\n<div class=\"master\">\n    <div class=\"left1\">\n         <div style = \"float:left;\">\n             <img  src=\"https://fabtex.thirvusoft.live/files/ft.jpg\" style = \"width:50px ;height:50px;padding-left:3px;padding-top:3px;\">\n        </div>\n            <div style = \"float:right;padding-right:17px;margin-top: 19px;font-size:16px\">\n                 <b>{{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','address_title') }}</b>\n            </div>\n        <p style=\"border-bottom:1px solid black;padding:3px;height:150px;margin-top: 47px;font-size:10px;\">\n            {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','address_line1') }},{{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','address_line2') }},{{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','city') }}<br>\n            {{ frappe.db.get_value('Address','FACTORY ADDRESS U1-Office','address_title') }}: {{ frappe.db.get_value('Address','FACTORY ADDRESS U1-Office','address_line1') }},<br>\n            {{ frappe.db.get_value('Address','FACTORY ADDRESS U1-Office','address_line2') }}, {{ frappe.db.get_value('Address','FACTORY ADDRESS U1-Office','city') }} {{ frappe.db.get_value('Address','FACTORY ADDRESS U1-Office','pincode') }}<br>\n            {{ frappe.db.get_value('Address','FACTORY ADDRESS UII-Office','address_title') }}: {{ frappe.db.get_value('Address','FACTORY ADDRESS UII-Office','address_line1') }},<br>\n            {{ frappe.db.get_value('Address','FACTORY ADDRESS UII-Office','address_line2') }}, {{ frappe.db.get_value('Address','FACTORY ADDRESS UII-Office','city') }} {{ frappe.db.get_value('Address','FACTORY ADDRESS UII-Office','pincode') }}<br>\n            MOB: {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','phone') }} <br>\n            GSTIN/UIN: {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','gstin') }}<br>\n            State Name : {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','gst_state') }}, Code: {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','gst_state_number') }}<br>\n            Email: {{ frappe.db.get_value('Address','FABTEX ENGINEERING WORKS-Billing','email_id') }}<br>\n        </p>\n        {% set customer_add=frappe.get_doc('Address',doc.customer_address) %}\n        <p style=\"padding:3px;\">\n            Buyer<br>\n            <b>{{customer_add.address_title}}</b><br>\n            {{customer_add.address_line1}},<br>\n            {{customer_add.city}} - {{customer_add.pincode}}<br>\n            {{customer_add.phone}}<br>\n            GSTIN/UIN : {{customer_add.gstin}}<br>\n            State Name : {{customer_add.gst_state}}, Code: {{customer_add.gst_state_number}}<br>\n        </p>\n    </div>\n    <div class=\"right1\" style=\"border-left:1px solid black;\">\n        <table>\n            <tr>\n                <td>Invoice No. <br><b> {{doc.name}}</b></td>\n                <td class = \"leftline\">Dated <br><b> {{doc.get_formatted(\"posting_date\")}}</b></td>\n            </tr>\n            <tr>\n                 {% set deli =[]%}\n                {% set deli_doc = frappe.get_all(\"Sales Invoice Item\" ,filters={'parent':doc.name} ,pluck=\"delivery_note\") %}\n                 {% for i in deli_doc %}\n                 {% if i not in deli %}\n                 {% set _ = deli.append(i) %}\n                 {% endif %}\n                 {% endfor %}\n                <td>Delivery Note<br><b>{{\", \".join(deli)}}</b></td>\n                 {% set customer=frappe.get_doc('Customer',doc.customer) %}\n                <td class = \"leftline\">Mode/Terms of Payment<br><b>{% if customer.payment_terms %}{{customer.payment_terms}}{% else %}<br>{% endif %}</b></td>\n            </tr>\n            <tr>\n                <td>Supplier's Ref.<br><b>{% if doc.suppliers_ref %}{{doc.suppliers_ref}}{% else %}<br>{% endif %}</b></td>\n                <td class = \"leftline\">Other Reference(s)<br><b>{% if doc.other_references %}{{ doc.other_references }}{% else %}<br>{% endif %}</b></td>\n            </tr>\n            <tr>\n                <td>Buyers Order No.<br><b>{% if doc.po_no %}{{doc.po_no}}{% else %}<br>{% endif %}</b></td>\n                <td class = \"leftline\">Dated<br><b>{% if doc.get_formatted(\"po_date\") %}{{ doc.get_formatted(\"po_date\") }}{% else %}<br>{% endif %}</b></td>\n            </tr>\n            <tr>\n                <td>G.R. No. & Date<br><b>{% if doc.g_r_no_ %}{{doc.g_r_no_}}{% else %}{% endif %} &nbsp; {% if doc.gr_no_date %}{{doc.get_formatted(\"gr_no_date\")}}{% else %}<br>{% endif %}</b></td>\n                {% set date =[]%}\n               \n                {% for i in deli %}\n                {% set _ = date.append(frappe.get_all(\"Delivery Note\",fields=['posting_date'],filters={'name':i},pluck=\"posting_date\")[0].strftime('%d-%m-%y')) %}\n                {% endfor %}\n                <td class = \"leftline\" >Delivery Note Date<br><b>{{ \", \".join(date) }}</b></td>\n            </tr>\n            <tr>\n                <td>Despatch through<br><b>{% if doc.despatch_through %}{{ doc.despatch_through }}{% else %}{{\"\"}}{% endif %}</b></td>\n                <td class = \"leftline\">Destination<br><b>{{customer_add.city}}</b></td>\n            </tr>\n            <tr>\n                <td>Vessel/Flight No.<br><b>{% if doc.vessel_flight_no %}{{ doc.vessel_flight_no }}{% else %}<br>{% endif %}</b></td>\n                <td class = \"leftline\">Place of receipt by shipper:<br><b>{% if doc.place_of_receipt_by_shipper %}{{ doc.place_of_receipt_by_shipper }}{% else %} <br> {% endif %}</b></td>\n            </tr>\n                        <tr>\n                <td>City/Port of Loading<br><b>{% if doc.city_port_of_loading %}{{ doc.city_port_of_loading }}{% else %}<br>{% endif %}</b></td>\n                <td class = \"leftline\">City/Port of Discharge<br><b>{% if doc.city_port_of_discharge %}{{ doc.city_port_of_discharge }}{% else %}<br>{% endif %}</b></td>\n            </tr>\n            <tr style=\"border-bottom:0px;height:127px;\">\n                <td colspan=\"2\"><b>Terms of Delivery</b><br>{% if doc.terms %}{{ doc.terms }}{% else %}<br>{% endif %}</td> \n            </tr>\n            \n        </table>\n    </div>\n    <!--item description table for SEZ tax category-->\n    {% if doc.gst_category==\"SEZ\" %}\n    <table>\n        <tr style=\"text-align:center;border-bottom:1px solid black;border-top:1px solid black;top-padding:0.5px;\">\n            <td style=\"width:4%;border-right:1px solid black;\">SI No</td>\n            <td style=\"width:28%;border-right:1px solid black;\">Description of Goods</td>\n            <td style=\"width:14%;border-right:1px solid black;text-align:center;\">HSN/SAC</td>\n            <td style=\"width:8%;border-right:1px solid black;text-align:center;\">GST Rate</td>\n            <td style=\"width:10%;border-right:1px solid black;text-align:center;\">Quantity</td>\n            <td style=\"width:14%;border-right:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"width:6%;border-right:1px solid black;text-align:center;\">Per</td>\n            <td style=\"width:16%;\">Amount</td>\n        </tr>\n        {% set taxcal={} %}\n        {% set tax = [] %}\n        {% set serial_no=[] %}\n        {% for item in doc.items %}\n        {% set _=serial_no.append(1) %}\n            <tr>\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ serial_no|length }}</td>\n                <td style=\"border-right:1px solid black;\"><b>{{item.item_name}}</b><br><span style=\"padding-left:7px;\">{{item.description or \" \"}}</span></td>\n                <td style=\"border-right:1px solid black;text-align:right;\">{{item.gst_hsn_code}}</td>\n                {% set d=frappe.get_doc('Item',item.item_code) %}\n                {% if d.taxes|length %}\n                    {% set t=d.taxes[0].item_tax_template %}\n                    {% set td=frappe.get_doc('Item Tax Template',t) %}\n                    {% set tax=[] %}\n                    {% for i in td.taxes %}\n                        {% set _=tax.append(i.tax_rate) %}\n                    {% endfor %}\n                {% endif %}\n                    {% set taxx = item.gst_hsn_code %}\n                    {% if taxx in taxcal %}\n                        {% set x=[] %}\n                        {% set _=x.append(taxcal[taxx]) %}\n                        {% set _= taxcal.update({taxx: x[0]+ item.amount})%}\n                    {% else %}\n                    {% set _=taxcal.update({taxx: item.amount}) %}\n                    {% endif %}\n                <td style=\"text-align:center;border-right:1px solid black;text-align:right;\">{{\"0\"}} %</td>\n                <td style=\"text-align:right;border-right:1px solid black;text-align:right;\">{{item.qty}} {{item.uom}}</td>\n                <td style=\"border-right:1px solid black;text-align:right;\">{{item.rate}}</td>\n                <td style=\"border-right:1px solid black;text-align:right;\">{{item.uom}}</td>\n              <td style=\"text-align:right;\"><b>{{item.amount}}</b></td>\n            </tr>\n        {% endfor %}\n        {% for empty in range(4- doc.items|length) %}\n                <tr style=\"height:10px;\">\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                   <td></td>\n                   \n                </tr>\n        {% endfor %}\n        <tr style=\"border-top:1px solid black;border-bottom:1px solid black;\">\n            <td></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">Total</td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">{{doc.total_qty}}</td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\">&#8377;{{doc.total}}</td>\n        </tr>\n    </table>\n    <table>\n        <tr>\n            <td> Amount Chargeable (in words): <br><b>{{ frappe.utils.money_in_words(doc.total) }}</b></td>\n            <td style=\"text-align:right;\">E. & O.E</td>\n        </tr>\n    </table>\n    <!--item description table for DEEMED EXPORTS tax category-->\n    {% elif doc.gst_category==\"Deemed Export\" %}\n    <table>\n        <tr style=\"text-align:center;border-bottom:1px solid black;border-top:1px solid black;top-padding:0.5px;\">\n            <td style=\"width:4%;border-right:1px solid black;\">SI No</td>\n            <td style=\"width:28%;border-right:1px solid black;\">Description of Goods</td>\n            <td style=\"width:14%;border-right:1px solid black;\">HSN/SAC</td>\n            <td style=\"width:8%;border-right:1px solid black;\">GST Rate</td>\n            <td style=\"width:10%;border-right:1px solid black;\">Quantity</td>\n            <td style=\"width:14%;border-right:1px solid black;\">Rate</td>\n            <td style=\"width:6%;border-right:1px solid black;\">per</td>\n            <td style=\"width:16%;\">Amount</td>\n        </tr>\n        {% set taxcal={} %}\n        {% set tax = [] %}\n        {% set serial_no=[] %}\n        {% for item in doc.items %}\n        {% set _=serial_no.append(1) %}\n            <tr>\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ serial_no|length }}</td>\n                <td style=\"border-right:1px solid black;\"><b>{{item.item_name}}</b><br><span style=\"padding-left:7px;\">{{item.description or \" \"}}</span></td>\n                <td style=\"border-right:1px solid black;\">{{item.gst_hsn_code}}</td>\n                {% set d=frappe.get_doc('Item',item.item_code) %}\n                {% if d.taxes|length %}\n                    {% set t=d.taxes[0].item_tax_template %}\n                    {% set td=frappe.get_doc('Item Tax Template',t) %}\n                    {% set tax=[] %}\n                    {% for i in td.taxes %}\n                        {% set _=tax.append(i.tax_rate) %}\n                    {% endfor %}\n                {% endif %}\n                    {% set taxx = item.gst_hsn_code %}\n                    {% if taxx in taxcal %}\n                        {% set x=[] %}\n                        {% set _=x.append(taxcal[taxx]) %}\n                        {% set _= taxcal.update({taxx: x[0]+ item.amount})%}\n                    {% else %}\n                    {% set _=taxcal.update({taxx: item.amount}) %}\n                    {% endif %}\n                <td style=\"text-align:center;border-right:1px solid black;\">{{\"0\"}} % </td>\n                <td style=\"text-align:right;border-right:1px solid black;\">{{item.qty}} {{item.uom}}</td>\n                <td style=\"border-right:1px solid black;\">{{item.rate}}</td>\n                <td style=\"border-right:1px solid black;\">{{item.uom}}</td>\n              <td style=\"text-align:right;\"><b>{{item.amount}}</b></td>\n            </tr>\n        {% endfor %}\n        {% for empty in range(4- doc.items|length) %}\n                <tr style=\"height:10px;\">\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                   <td></td>\n                   \n                </tr>\n        {% endfor %}\n        <tr style=\"border-top:1px solid black;border-bottom:1px solid black;\">\n            <td></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">Total</td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">{{doc.total_qty}}</td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\">&#8377;{{doc.total}}</td>\n        </tr>\n    </table>\n    <table>\n        <tr>\n            <td> Amount Chargeable (in words): <br><b>{{ frappe.utils.money_in_words(doc.total) }}</b></td>\n            <td style=\"text-align:right;\">E. & O.E</td>\n        </tr>\n    </table>\n    <!--item description table for Out-State tax category-->\n    {% elif doc.tax_category==\"Out-State\" %}\n    <table>\n        <tr style=\"text-align:center;border-bottom:1px solid black;border-top:1px solid black;top-padding:0.5px;\">\n            <td style=\"width:4%;border-right:1px solid black;\">SI No</td>\n            <td style=\"width:28%;border-right:1px solid black;\">Description of Goods</td>\n            <td style=\"width:14%;border-right:1px solid black;text-align:right;\">HSN/SAC</td>\n            <td style=\"width:8%;border-right:1px solid black;text-align:right;\">GST Rate</td>\n            <td style=\"width:10%;border-right:1px solid black;text-align:right;\">Quantity</td>\n            <td style=\"width:14%;border-right:1px solid black;text-align:right;\">Rate</td>\n            <td style=\"width:6%;border-right:1px solid black;text-align:right;\">Per</td>\n            <td style=\"width:16%;\">Amount</td>\n        </tr>\n        {% set taxcal={} %}\n        {% set tax = [] %}\n        {% set serial_no=[] %}\n        {% for item in doc.items %}\n        {% set _=serial_no.append(1) %}\n            <tr>\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ serial_no|length }}</td>\n                <td style=\"border-right:1px solid black;\"><b>{{item.item_name}}</b><br><span style=\"padding-left:7px;\">{{item.description or \" \"}}</span></td>\n                <td style=\"border-right:1px solid black;\">{{item.gst_hsn_code}}</td>\n                {% set d=frappe.get_doc('Item',item.item_code) %}\n                {% if d.taxes|length %}\n                    {% set t=d.taxes[0].item_tax_template %}\n                    {% set td=frappe.get_doc('Item Tax Template',t) %}\n                    {% set tax=[] %}\n                    {% for i in td.taxes %}\n                        {% set _=tax.append(i.tax_rate) %}\n                    {% endfor %}\n                {% endif %}\n                    {% set taxx = item.gst_hsn_code %}\n                    {% if taxx in taxcal %}\n                        {% set x=[] %}\n                        {% set _=x.append(taxcal[taxx]) %}\n                        {% set _= taxcal.update({taxx: x[0]+ item.amount})%}\n                    {% else %}\n                    {% set _=taxcal.update({taxx: item.amount}) %}\n                    {% endif %}\n                 {% set tax=frappe.get_doc('Item Tax Template',item.item_tax_template) %}\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ tax.taxes[0].tax_rate}}%</td>\n                <td style=\"text-align:right;border-right:1px solid black;\"><b>{{item.qty}} {{item.uom}}</b></td>\n                <td style=\"text-align:right;border-right:1px solid black;\">{{item.rate}}</td>\n                <td style=\"border-right:1px solid black;\">{{item.uom}}</td>\n                <td style=\"text-align:right;\"><b>{{item.amount}}</b></td>\n            </tr>\n        {% endfor %}\n        {% for empty in range(4- doc.items|length+3) %}\n                <tr style=\"height:10px;\">\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                   <td></td>\n                   \n                </tr>\n        {% endfor %}\n            <tr style=\"height:10px;\">\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">igst</td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\">{{'%0.2f' %  doc.total_taxes_and_charges or \" \"}}</td>\n        </tr>\n        <tr style=\"border-top:1px solid black;border-bottom:1px solid black;\">\n            <td></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"><b>Total</b></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"><b>{{doc.total_qty}}</b></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\"><b>&#8377;{{doc.rounded_total}}</b></td>\n        </tr>\n    </table>\n    <table>\n        <tr>\n            <td> Amount Chargeable (in words): <br><b>{{ frappe.utils.money_in_words(doc.rounded_total) }}</b></td>\n            <td style=\"text-align:right;\">E. & O.E</td>\n        </tr>\n    </table>\n    <!--item description table for In-State tax category-->\n    {% else %}\n    <table>\n        <tr style=\"text-align:center;border-bottom:1px solid black;border-top:1px solid black;top-padding:0.5px;\">\n            <td style=\"width:4%;border-right:1px solid black;\">SI No</td>\n            <td style=\"width:28%;border-right:1px solid black;\">Description of Goods</td>\n            <td style=\"width:14%;border-right:1px solid black;\">HSN/SAC</td>\n            <td style=\"width:8%;border-right:1px solid black;\">GST Rate</td>\n            <td style=\"width:10%;border-right:1px solid black;\">Quantity</td>\n            <td style=\"width:14%;border-right:1px solid black;\">Rate</td>\n            <td style=\"width:6%;border-right:1px solid black;\">per</td>\n            <td style=\"width:16%;\">Amount</td>\n        </tr>\n        {% set taxcal={} %}\n        {% set tax = [] %}\n        {% set serial_no=[] %}\n        {% for item in doc.items %}\n        {% set _=serial_no.append(1) %}\n            <tr>\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ serial_no|length }}</td>\n                <td style=\"border-right:1px solid black;\"><b>{{item.item_name}}</b><br><span style=\"padding-left:7px;\">{{item.description or \" \"}}</span></td>\n                <td style=\"border-right:1px solid black;\">{{item.gst_hsn_code}}</td>\n                {% set d=frappe.get_doc('Item',item.item_code) %}\n                {% if d.taxes|length %}\n                    {% set t=d.taxes[0].item_tax_template %}\n                    {% set td=frappe.get_doc('Item Tax Template',t) %}\n                    {% set tax=[] %}\n                    {% for i in td.taxes %}\n                        {% set _=tax.append(i.tax_rate) %}\n                    {% endfor %}\n                {% endif %}\n                    {% set taxx = item.gst_hsn_code %}\n                    {% if taxx in taxcal %}\n                        {% set x=[] %}\n                        {% set _=x.append(taxcal[taxx]) %}\n                        {% set _= taxcal.update({taxx: x[0]+ item.amount})%}\n                    {% else %}\n                    {% set _=taxcal.update({taxx: item.amount}) %}\n                    {% endif %}\n                     {% set tax=frappe.get_doc('Item Tax Template',item.item_tax_template) %}\n                <td style=\"text-align:center;border-right:1px solid black;\">{{ tax.taxes[0].tax_rate*2 }}%</td>\n                <td style=\"text-align:right;border-right:1px solid black;\"><b>{{item.qty}} {{item.uom}}</b></td>\n                <td style=\"text-align:right;border-right:1px solid black;\">{{item.rate}}</td>\n                <td style=\"border-right:1px solid black;\">{{item.uom}}</td>\n                <td style=\"text-align:right;\"><b>{{item.amount}}</b></td>\n            </tr>\n        {% endfor %}\n        {% set sgstt = [] %}\n        {% set cgstt = [] %}\n        {% for gst in doc.ts_tax_breakup_table %}\n        {% set _ = sgstt.append(gst.ts_state_amount) %}\n        {% set _ = cgstt.append(gst.ts_central_amount) %}\n        {% endfor %}\n        <tr style=\"height:10px;\">\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">Sgst</td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n           <td style=\"text-align:right;\">{{'%0.2f' % sgstt|sum or \" \"}}</td>\n        </tr>\n        \n        <tr style=\"height:10px;\">\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">Cgst</td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\">{{'%0.2f' %  cgstt|sum or \" \"}}</td>\n        </tr>\n        <tr style=\"height:10px;\">\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\">Rounded Off</td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n           <td style=\"text-align:right;\">{% if doc.rounding_adjustment %}{{ doc.rounding_adjustment }}{% else %}<br>{% endif %}</td>\n        </tr>\n       \n         {% for empty in range(4- doc.items|length+3) %}\n                <tr style=\"height:10px;\">\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                    <td style=\"border-right:1px solid black;\"></td>\n                   <td></td>\n                   \n                </tr>\n        {% endfor %}\n        <tr style=\"border-top:1px solid black;border-bottom:1px solid black;\">\n            <td></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"><b>Total</b></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"><b>{{doc.total_qty}}</b></td>\n            <td style=\"border-right:1px solid black;\"></td>\n            <td style=\"border-right:1px solid black;text-align:right;\"></td>\n            <td style=\"text-align:right;\"><b>&#8377;{{doc.rounded_total}}</b></td>\n        </tr>\n    </table>\n    <table>\n        <tr>\n            <td> Amount Chargeable (in words): <br><b>{{ frappe.utils.money_in_words(doc.grand_total) }}</b></td>\n            <td style=\"text-align:right;\">E. & O.E</td>\n        </tr>\n    </table>\n    {% endif %}\n    <!--tax table for sez-->\n    {% if doc.gst_category==\"SEZ\" %}\n    <table>\n        <tr>\n            <td style=\"width:50%;text-align:center;border-right:1px solid black;border-top:1px solid black;\">HSN/SAC</td>\n            <td style=\"text-align:center;border-top:1px solid black;border-right:1px solid black;\">Taxable</td>\n            <td colspan=\"2\" style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Integrated Tax</td>\n            <td style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Total </td>\n        </tr>\n        <tr>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">Value</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Amount</td>\n            <td style=\"border-right:1px solid black;text-align:center;\">Tax Amount </td>\n        </tr>\n        {% set total = [] %}\n        {% for i in taxcal %}\n        {% set _ = total.append(taxcal[i]) %}\n        <tr style=\"text-align:center;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;border-top:1px solid black;\">{{i}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxcal[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{\"0\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n        </tr>\n        {% endfor %}\n        <tr style=\"border-bottom:1px solid black;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;text-align:right;border-top:1px solid black;\">{{\"Total\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{total|sum or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n        </tr>\n    </table>\n    <!--tax table for DEEMED EXPORTS-->\n    {% elif doc.gst_category==\"Deemed Export\" %}\n    <table>\n        <tr>\n            <td style=\"width:50%;text-align:center;border-right:1px solid black;border-top:1px solid black;\">HSN/SAC</td>\n            <td style=\"text-align:center;border-top:1px solid black;border-right:1px solid black;\">Taxable</td>\n            <td colspan=\"2\" style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Integrated Tax</td>\n            <td style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Total </td>\n        </tr>\n        <tr>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">Value</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Amount</td>\n            <td style=\"border-right:1px solid black;text-align:center;\">Tax Amount </td>\n        </tr>\n        {% set total = [] %}\n        {% for i in taxcal %}\n        {% set _ = total.append(taxcal[i]) %}\n        <tr style=\"text-align:center;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;border-top:1px solid black;\">{{i}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxcal[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{\"0\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n        </tr>\n        {% endfor %}\n        <tr style=\"border-bottom:1px solid black;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;text-align:right;border-top:1px solid black;\">{{\"Total\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{total|sum or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n        </tr>\n    </table>\n    <!--tax table for Out-State-->\n    {% elif doc.tax_category==\"Out-State\" %}\n    {% set total = [] %}\n    {% set hsn = [] %}\n    {% set taxable_values = [] %}\n    {% set irate = [] %}\n    {% set iamount = [] %}\n    {% for gst in doc.ts_tax_breakup_gst_table %}\n    {% set _ = hsn.append(gst.ts_hsn_code) %}\n    {% set _ = taxable_values.append(gst.ts_taxable_values) %}\n    {% set _ = irate.append(gst.ts_igst_tax) %}\n    {% set _ = iamount.append(gst.ts_igst_amount) %}\n    {% set _ = total.append(gst.ts_total_tax_amount) %}\n    {% endfor %}\n    <table>\n        <tr>\n            <td style=\"width:50%;text-align:center;border-right:1px solid black;border-top:1px solid black;\">HSN/SAC</td>\n            <td style=\"text-align:center;border-top:1px solid black;border-right:1px solid black;\">Taxable</td>\n            <td colspan=\"2\" style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Integrated Tax</td>\n            <td style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Total </td>\n        </tr>\n        <tr>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">Value</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Amount</td>\n            <td style=\"border-right:1px solid black;text-align:center;\">Tax Amount </td>\n        </tr>\n         {% for i in range (hsn|length) %}\n        <tr style=\"text-align:center;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;border-top:1px solid black;\">{{hsn[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxable_values[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{irate[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % iamount[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % total[i]}}</td>\n            {% endfor %}\n        </tr>\n        <tr style=\"border-bottom:1px solid black;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;text-align:right;border-top:1px solid black;\">{{\"Total\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxable_values|sum}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % iamount|sum}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % total|sum}}</td>\n        </tr>\n    </table>\n    <!--tax table for In-State-->\n    {% else %}\n    {% set total = [] %}\n    {% set hsn = [] %}\n    {% set taxable_values = [] %}\n    {% set srate = [] %}\n    {% set samount = [] %}\n    {% set crate = [] %}\n    {% set camount = [] %}\n    {% for gst in doc.ts_tax_breakup_gst_table %}\n    {% set _ = hsn.append(gst.ts_hsn_code) %}\n    {% set _ = taxable_values.append(gst.ts_taxable_values) %}\n    {% set _ = srate.append(gst.ts_state_tax) %}\n    {% set _ = samount.append(gst.ts_state_amount) %}\n    {% set _ = crate.append(gst.ts_central_tax) %}\n    {% set _ = camount.append(gst.ts_central_amount) %}\n    {% set _ = total.append(gst.ts_total_tax_amount) %}\n    {% endfor %}\n     <table>\n        <tr>\n            <td style=\"width:50%;text-align:center;border-right:1px solid black;border-top:1px solid black;\">HSN/SAC</td>\n            <td style=\"text-align:center;border-top:1px solid black;border-right:1px solid black;\">Taxable</td>\n            <td colspan=\"2\" style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Central Tax</td>\n            <td colspan=\"2\" style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">State Tax</td>\n            <td style=\"border-top:1px solid black;border-right:1px solid black;text-align:center;\">Total </td>\n        </tr>\n        <tr>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">Value</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Amount</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Rate</td>\n            <td style=\"border-right:1px solid black;border-top:1px solid black;text-align:center;\">Amount</td>\n            <td style=\"border-right:1px solid black;text-align:center;\">Tax Amount</td>\n        </tr>\n        {% for i in range (hsn|length) %}\n        <tr style=\"text-align:center;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;border-top:1px solid black;\">{{hsn[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxable_values[i]}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{srate[i] or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % samount[i] or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{crate[i] or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % camount[i] or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % total[i] or \" \"}}</td>\n            \n        {% endfor %}    \n        </tr>\n        <tr style=\"border-bottom:1px solid black;border-top:1px solid black;\">\n            <td style=\"width:50%;border-right:1px solid black;text-align:right;border-top:1px solid black;\">{{\"Total\"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{taxable_values|sum}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % samount|sum or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\"></td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % camount|sum or \" \"}}</td>\n            <td style=\"text-align:center;border-right:1px solid black;\">{{'%0.2f' % total|sum or \" \"}}</td>\n        </tr>\n    </table>\n    {% endif %}\n    <div>\n        <p style=\"padding-left:4px;\">\n            Tax Amount(in Words)&nbsp;&nbsp;: {{ frappe.utils.money_in_words(doc.rounded_total) }}<br><br>\n            Company's VAT TIN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {{ frappe.db.get_value('Company','Fabtex Engineering Works','vat_tin') }}                <br>\n            Company's CST No&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {{ frappe.db.get_value('Company','Fabtex Engineering Works','cst_no') }}               <br>\n            Company's PAN&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: {{ frappe.db.get_value('Company','Fabtex Engineering Works','pan_details') }}              <br>\n            \n        </p>\n    </div>\n    <table class=\"hsn\">\n        <tr>\n            <td>\n                <b>Declaration:</b>\n                <p style=\"text-align:justify;\">We declare that this invoice shows the actual price of the goods described and that all particulars are true and correct</p>\n            </td>\n            <td style=\"text-align:right;border-left:1px solid black;width:40%;\">\n                <span style=\"padding-right:30px;\">for FABTEX ENGINEERING WORKS</span>\n                <br>\n                <br>\n                <br>\n                <span style=\"padding-right:70px;\">Authorised Signatory</span>\n            </td>\n        </tr>\n    </table>\n</div>\n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2022-04-28 17:08:15.343377",
 "modified_by": "Administrator",
 "module": "fabtex",
 "name": "TS Sales Invoice",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Jinja",
 "raw_printing": 0,
 "show_section_headings": 0,
 "standard": "Yes"
}